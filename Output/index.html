<!DOCTYPE html>
<meta charset="utf-8" />
<svg width="1920" height="1080"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
    //initilize svg or grab svg
    var svg = d3.select("svg");
    var width = svg.attr("width");
    var height = svg.attr("height");

    var graphData = {
        nodes: [
            { name: "Geforce4090", offer: "Vendemos tarjetas gráficas de la marca Nvidia a un precio razonable. Son dirigidas para jugar video juegos en la computadora y son los componentes más poderosos del mercado.", demand: "Video juegos con una calidad de gráficos muy alta para aprovechar el poder que ofrecen las tarjetas gráficas Nvidia.", postdate: "17/12/2026", colorID: "0"},
            { name: "CostaRica70", offer: "", demand: "Necesitamos una fuente de entretenimiento, ya sea de música, conciertos, video juegos, o deportes, para consolar y entretener a una nación decepcionada y en duelo.", postdate: "17/12/2026", colorID: "0"},
            { name: "abdul_qatar", offer: "comida a domicilio, seguimos dietas, productos orgánicos, planes semanales y mensuales", demand: "pollo, vegetales, carne, legumbres, cerdo, arroz, frijoles, platano", postdate: "17/12/2026", colorID: "0"},
            { name: "costarica_espana", offer: "disenadores y programadores en muchos lenguajes de programacion, sin experiencia pero programan bonito.", demand: "entrenadores de futbol para ver si los programadores crean una nueva seleccion.", postdate: "17/12/2026", colorID: "0"},
            { name: "valeska_guerrera_patria", offer: " ", demand: "necesito martillos vikingos programables con python o java para crear un ejercito y conquistar todos los planteas del sistema solar. ", postdate: "17/12/2026", colorID: "0"},
            { name: "rather_than_luck", offer: "abonos, herramientas, piedras para el jardin a precios competitivos, atendemos en todo el país. productos 100% orgánicos.", demand: "mallas metálicas, cedazos, cuerdas y servicios de transporte como camiones", postdate: "17/12/2026", colorID: "0"},
            { name: "loky_god_evil", offer: "deportes de ataque y defensa como futbol, competencias y conquista de planetas.", demand: "martillos vikingos con super poderes, de cualquier tamaño, parecidos a los de mi hermano.", postdate: "17/12/2026", colorID: "0"},
            { name: "bartoleto_chain_free", offer: "entrenamientos en futbol, tenis, natacion en nuestro sport center. precios por hora y por mes.", demand: "implementos deportivos de alta calidad, mantenimiento de jardines y martillos vikingos. ", postdate: "17/12/2026", colorID: "0"},
            { name: "qatar_fiesta_ley_seca", offer: "decoración y diseño de jardínes de lujo. vamos a cualquier parte del país, usamos zacate, piedra, flores y plantas endémicas. ", demand: "ando en busca de abono organico especialmente enriquecido con cuita de gallina y aves similares", postdate: "17/12/2026", colorID: "0"},
            { name: "odin_rebel_420", offer: "fabrico martillos de dioses vikingos XL, XXL y más. Útiles para paredes, ladrones, casos, enderezar carros, romper piedra y arreglar código programado hecho en cobol. ", demand: " ", postdate: "17/12/2026", colorID: "0"},
            { name: "OriSolis25", offer: "Tengo un salon de eventos donde se pueden realizar conciertos a todo volumen y llenos de gente, especialmente de regueton.", demand: "Necesito programadores para desarrollar una aplicacion para vender tiquetes y tambien necesito proveedores de comida, como tacos, pollo, y hamburguesas", postdate: "17/12/2026", colorID: "0"},
            { name: "poly_bridgers", offer: "Somos una empresa constructora de puentes hechos con materiales de calidad. Hemos construido puentes en ciudades como Lóndres, San Francisco, Tokyo y San José.", demand: "Necesitamos materiales de construcción de alta calidad para construir nuestros puentes.", postdate: "17/12/2026", colorID: "0"},
            { name: "Green_Lion", offer: "Vendemos botellas hechas de un material a base de bambú, por lo que son amigables con el ambiente. Las botellas son biodegradables y se podrían usar para tomar agua, café, jugo y más.", demand: "Necesitamos un servicio de envíos rápidos para que nuestros clientes reciban sus botellas el mismo día que las compran.", postdate: "17/12/2026", colorID: "0"},
            { name: "SuperSmashCoders122", offer: "Desarrollamos video juegos extremadamente divertidos que ofrecen cientas de horas de entretenimiento. Los jugadores pueden jugar en línea o localmente.", demand: "Buscamos un compositor de música que pueda trabajar con diferentes géneros musicales para que componga la música de nuestros juegos.", postdate: "17/12/2026", colorID: "0"},
            { name: "PapaNoel2512", offer: "Brindamos un servicio de recepción y envíos de paquetes a una escala mundial. El tiempo estimado de envío es de una noche hasta un día completo gracias a nuestros vehículos de gran velocidad.", demand: "Necesitamos muchos arbolitos de pino para decorar nuestro almacén de productos para la época navideña. Se prefieren buenos precios.", postdate: "17/12/2026", colorID: "0"},
            { name: "SantaClaus37", offer: "Brindamos", demand: "un", postdate: "17/12/2026", colorID: "0"},
            { name: "the_agustd7", offer: "composicion de letras y beats de diferentes generos musicales", demand: "artistas musicales talentosos con facilidad de adaptarse facilmente a un proyecto musical", postdate: "17/12/2026", colorID: "0"},
            { name: "Kenneth483883", offer: "vendo", demand: "", postdate: "17/12/2026", colorID: "0"},
            { name: "arbolito4848", offer: "se vende arbolitos de pino a buen precio", demand: "", postdate: "17/12/2026", colorID: "0"},
            { name: "BobTheBuilder250", offer: "Vendemos materiales para la construcción de edificios, casas y proyectos de la más alta calidad. Adicionalmente, tenemos un gran equipo de ingenieros civiles con mucha experiencia en el desarrollo de infraestructura pública.", demand: "Ocupo una institución educativa para mis hijos, quienes poseen gran talento para las áreas STEM, y quienes desean ser futuros ingenieros.", postdate: "17/12/2026", colorID: "0"},
            { name: "OlcoManGold", offer: "Me desempeño como programador y desarrollador de software. Tengo mucha experiencia tras trabajar once años en la industria. Soy experto en lenguajes como Python y me especializo en el desarrollo del firmware para dispositivos", demand: "Soy aficionado a la gastronomía mexicana, por lo que necesito poder almorzar tacos de pollo, ya sea asado, frito o al ajillo, todos los días y desde un punto de venta accesible.", postdate: "17/12/2026", colorID: "0"},
            { name: "CompuYankeeDev129", offer: "Soy un ingeniero en computación con cuatro años de experiencia. He trabajado como programador en Python y Java en empresas desarrolladoras de software como RealSolutions.", demand: "Busco entretenimiento. Me gustaría asistir a un concierto de 2 horas con el estadio lleno de gente y no me preocupa la falta de complejidad armónica en los acordes ya que me gusta el reguetón.", postdate: "17/12/2026", colorID: "0"},
            { name: "Mesa_School", offer: "Somos una institución educativa para niños y adolescentes talentosos que busca explotar su potencial intelectual desarrollando sus habilidades STEM para llegar a ser los futuros ingenieros en computación.", demand: "Necesitamos medicamentos para los estudiantes de la escuela, especialmente para los niños de primaria ya que las enfermedades respiratorias tienen una alta incidencia en la población estudiantil.", postdate: "17/12/2026", colorID: "0"},
            { name: "AstraMedical222", offer: "Somos una empresa farmacéutica que desarrolla medicamentos para combatir enfermedades respiratorias para niños de escuela con factores de riesgo.", demand: "Necesitamos dispositivos médicos de alta tecnología y calidad para ayudarnos en nuestro trabajo de investigación de medicamentos para tratar enfermedades respiratorias infantiles.", postdate: "17/12/2026", colorID: "0"},
            { name: "construSoluciones2001", offer: "Ofrecemos mano de obra y materiales para la construccion de su casa, edificio o proyect", demand: "Materiales de construccion de las mas alta claidad e ingenieros con experiencia", postdate: "17/12/2026", colorID: "0"},
            { name: "RealSolutions", offer: "Somos una empresa desarrolladora de software. Contamos con un equipo de programadores con mucha experiencia y conocimientos en muchos lenguajes como Python. Nuestros ingenieros en computación pueden trabajar en todo tipo de dispositivos.", demand: "Necesitamos un edificio de oficinas para acomodar a nuestro equipo de cincuenta personas. Debe poder tener altas velocidades de Internet, ser moderno y tecnológico.", postdate: "17/12/2026", colorID: "0"},
            { name: "EstructurasMina", offer: "Somos una empresa constructora que construye edificios de oficinas modernos y espaciosos. Nuestros edificios pueden acomodar la última tecnología fácilmente y están diseñados para tener altas velocidades de internet.", demand: "Un convenio con una institución de salud para atender a nuestros empleados que resulten lesionados por accidentes en el área laboral para que se recuperen rápidamente.", postdate: "17/12/2026", colorID: "0"},
            { name: "Hospital_Tec", offer: "Somos una institución que brinda un servicio de alta calidad en el área de la salud. Nos especializamos en tratar lesiones provocadas por accidentes en el área de trabajo.", demand: "Necesitamos dispositivos médicos de alta calidad y tecnología, hechos de metales resistentes, para sacar radiografías de fracturas, resonancias magnéticas, y quirófanos.", postdate: "17/12/2026", colorID: "0"},
            { name: "Wakanda_Med", offer: "Vendemos máquinas con fines médicos de alta tecnología y calidad, hechas de metales exóticos, para tratamientos de enfermedades o heridas fatales.", demand: "Necesitamos muchos programadores con mucha experiencia para desarrollar el software de nuestros dispositivos médicos", postdate: "17/12/2026", colorID: "0"},
            { name: "vendePollos38", offer: "Se vende pollo asado, frito o al ajillo", demand: "carne de pollo de la más alta calidad y aceite", postdate: "17/12/2026", colorID: "0"},
            { name: "elvendeTacos29", offer: "venta de tacos al estilo mexicano tradicional ", demand: "Verduras frescas de la más alta calidad y carne de res o cerdo", postdate: "17/12/2026", colorID: "0"},
            { name: "badbunny_in_concert", offer: "conciertos a estadio lleno de gente escuchando pum pum con el mismo acorde por 2 horas", demand: "transporte y seguridad en todos los paises que visita y mucha fiesta tambien", postdate: "17/12/2026", colorID: "0"},
            { name: "rock_odin_gold", offer: "soy programador python con experiencia", demand: "", postdate: "17/12/2026", colorID: "0"},
            { name: "metal_year_2000", offer: "", demand: "requiero de 5 ingenieros en computación con 8 años de experiencia, conocimientos en python.", postdate: "17/12/2026", colorID: "0"},
            { name: "josearnoldowood", offer: "esta es la oferta", demand: "esta es la demanda", postdate: "17/12/2026", colorID: "0"},
        ],
        links: [
            { source: "costarica_espana", target: "Wakanda_Med", weight: "7"},
            { source: "rather_than_luck", target: "PapaNoel2512", weight: "5"},
            { source: "Green_Lion", target: "BobTheBuilder250", weight: "5"},
            { source: "PapaNoel2512", target: "Green_Lion", weight: "5"},
            { source: "BobTheBuilder250", target: "poly_bridgers", weight: "5"},
            { source: "BobTheBuilder250", target: "AstraMedical222", weight: "5"},
            { source: "BobTheBuilder250", target: "Wakanda_Med", weight: "6"},
            { source: "OlcoManGold", target: "OriSolis25", weight: "7"},
            { source: "OlcoManGold", target: "PapaNoel2512", weight: "5"},
            { source: "OlcoManGold", target: "BobTheBuilder250", weight: "5"},
            { source: "OlcoManGold", target: "AstraMedical222", weight: "6"},
            { source: "OlcoManGold", target: "Wakanda_Med", weight: "8"},
            { source: "Mesa_School", target: "OriSolis25", weight: "6"},
            { source: "Mesa_School", target: "PapaNoel2512", weight: "6"},
            { source: "Mesa_School", target: "BobTheBuilder250", weight: "11"},
            { source: "Mesa_School", target: "AstraMedical222", weight: "6"},
            { source: "Mesa_School", target: "EstructurasMina", weight: "7"},
            { source: "AstraMedical222", target: "OriSolis25", weight: "7"},
            { source: "AstraMedical222", target: "PapaNoel2512", weight: "6"},
            { source: "AstraMedical222", target: "BobTheBuilder250", weight: "7"},
            { source: "AstraMedical222", target: "Mesa_School", weight: "11"},
            { source: "AstraMedical222", target: "EstructurasMina", weight: "6"},
            { source: "AstraMedical222", target: "Wakanda_Med", weight: "5"},
            { source: "RealSolutions", target: "Wakanda_Med", weight: "9"},
            { source: "EstructurasMina", target: "BobTheBuilder250", weight: "5"},
            { source: "EstructurasMina", target: "AstraMedical222", weight: "5"},
            { source: "EstructurasMina", target: "RealSolutions", weight: "8"},
            { source: "Hospital_Tec", target: "BobTheBuilder250", weight: "6"},
            { source: "Hospital_Tec", target: "AstraMedical222", weight: "6"},
            { source: "Hospital_Tec", target: "EstructurasMina", weight: "7"},
            { source: "Wakanda_Med", target: "Mesa_School", weight: "5"},
            { source: "Wakanda_Med", target: "AstraMedical222", weight: "8"},
            { source: "Wakanda_Med", target: "Hospital_Tec", weight: "6"},
        ]
    };

    var simulation = d3
        .forceSimulation(graphData.nodes)
        .force("collide", d3.forceCollide().radius(40))
        .force("charge", d3.forceManyBody().strength(50))
        .force("center", d3.forceCenter(width / 2, height / 2))
        .force("link", d3.forceLink(graphData.links).id(d => d.name))
        .on("tick", ticked);

    var links = svg
        .append("g")
        .selectAll("line")
        .data(graphData.links)
        .enter()
        .append("line")
        .attr("stroke-width", 3)
        .attr('marker-end', 'url(#mark-end-arrow)')
        .style("stroke", "Black");

    links.append("text").text(d => d.name);
    var defs = svg.append('svg:defs');
    defs.append('svg:marker')
        .attr('id', 'end-arrow')
        .attr('viewBox', '0 -5 10 10')
        .attr('refX', "32")
        .attr('markerWidth', 2)
        .attr('markerHeight', 2)
        .attr('orient', 'auto')
        .append('svg:path')
        .attr('d', 'M0,-L10,0L0,5');

    // define arrow markers for leading arrow
    defs.append('svg:marker')
        .attr('id', 'mark-end-arrow')
        .attr('viewBox', '0 -5 10 10')
        .attr('refX', 20)
        .attr('markerWidth', 3.5)
        .attr('markerHeight', 3.5)
        .attr('orient', 'auto')
        .append('svg:path')
        .attr('d', 'M0,-5L10,0L0,5');

    let color = [
        "#216be5", "#ff9440"
    ];

    var nodes = svg
        .append("g")
        .selectAll("circle")
        .data(graphData.nodes)
        .enter()
        .append("circle")
        .attr("r", 12)
        .style("fill", function(d) {
            return color[d.colorID];
        });

    var texts = svg
        .append("g")
        .selectAll("text")
        .data(graphData.nodes)
        .enter()
        .append("text")
        .text(d => d.name);

    var drag = d3
        .drag()
        .on("start", dragstarted)
        .on("drag", dragged)
        .on("end", dragended);

    nodes.call(drag);

    function ticked() {
        texts.attr("x",d => d.x);
        texts.attr("y",d => d.y);
        //updating the position
        nodes
            .attr("cx", function(d) {
                return d.x;
            })
            .attr("cy", function(d) {
                return d.y;
            });

        links
            .attr("x1", function(d) {
                return d.source.x;
            })
            .attr("y1", function(d) {
                return d.source.y;
            })
            .attr("x2", function(d) {
                return d.target.x;
            })
            .attr("y2", function(d) {
                return d.target.y;
            });
        console.log(simulation.alpha());
    }

    function dragstarted(d) {
        //your alpha hit 0 it stops! make it run again
        simulation.alphaTarget(0.3).restart();
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }

    function dragged(d) {
        d.fx = d3.event.x;
        d.fy = d3.event.y;
    }

    function dragended(d) {
        // alpha min is 0, head there
        simulation.alphaTarget(0);
        d.fx = null;
        d.fy = null;
    }
</script>

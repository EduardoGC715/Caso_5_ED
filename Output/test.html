<!DOCTYPE html>
<meta charset="utf-8" />
<svg width="1920" height="1080"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
 //initilize svg or grab svg
 var svg = d3.select("svg");
 var width = svg.attr("width");
 var height = svg.attr("height");

 var graphData = {

nodes: [
   { name: "abdul_qatar" ,offer:"comida a domicilio, seguimos dietas, productos orgánicos, planes semanales y mensuales",demand:"comida a domicilio, seguimos dietas, productos orgánicos, planes semanales y mensuales", chain: 0},
   { name: "costarica_espana" ,offer:"disenadores y programadores en muchos lenguajes de programacion, sin experiencia pero programan bonito.",demand:"disenadores y programadores en muchos lenguajes de programacion, sin experiencia pero programan bonito.", chain: 0},
   { name: "valeska_guerrera_patria" ,offer:" ",demand:" ", chain: 0},
   { name: "rather_than_luck" ,offer:"abonos, herramientas, piedras para el jardin a precios competitivos, atendemos en todo el país. productos 100% orgánicos.",demand:"abonos, herramientas, piedras para el jardin a precios competitivos, atendemos en todo el país. productos 100% orgánicos.", chain: 1},
   { name: "loky_god_evil" ,offer:"deportes de ataque y defensa como futbol, competencias y conquista de planetas.",demand:"deportes de ataque y defensa como futbol, competencias y conquista de planetas.", chain: 0},
   { name: "bartoleto_chain_free" ,offer:"entrenamientos en futbol, tenis, natacion en nuestro sport center. precios por hora y por mes.",demand:"entrenamientos en futbol, tenis, natacion en nuestro sport center. precios por hora y por mes.", chain: 0},
   { name: "qatar_fiesta_ley_seca" ,offer:"decoración y diseño de jardínes de lujo. vamos a cualquier parte del país, usamos zacate, piedra, flores y plantas endémicas. ",demand:"decoración y diseño de jardínes de lujo. vamos a cualquier parte del país, usamos zacate, piedra, flores y plantas endémicas. ", chain: 0},
   { name: "odin_rebel_420" ,offer:"fabrico martillos de dioses vikingos XL, XXL y más. Útiles para paredes, ladrones, casos, enderezar carros, romper piedra y arreglar código programado hecho en cobol. ",demand:"fabrico martillos de dioses vikingos XL, XXL y más. Útiles para paredes, ladrones, casos, enderezar carros, romper piedra y arreglar código programado hecho en cobol. ", chain: 0},
   { name: "OriSolis25" ,offer:"Tengo un salon de eventos donde se pueden realizar conciertos a todo volumen y llenos de gente, especialmente de regueton.",demand:"Tengo un salon de eventos donde se pueden realizar conciertos a todo volumen y llenos de gente, especialmente de regueton.", chain: 0},
   { name: "poly_bridgers" ,offer:"Somos una empresa constructora de puentes hechos con materiales de calidad. Hemos construido puentes en ciudades como Lóndres, San Francisco, Tokyo y San José.",demand:"Somos una empresa constructora de puentes hechos con materiales de calidad. Hemos construido puentes en ciudades como Lóndres, San Francisco, Tokyo y San José.", chain: 0},
   { name: "Green_Lion" ,offer:"Vendemos botellas hechas de un material a base de bambú, por lo que son amigables con el ambiente. Las botellas son biodegradables y se podrían usar para tomar agua, café, jugo y más.",demand:"Vendemos botellas hechas de un material a base de bambú, por lo que son amigables con el ambiente. Las botellas son biodegradables y se podrían usar para tomar agua, café, jugo y más.", chain: 0},
   { name: "SuperSmashCoders122" ,offer:"Desarrollamos video juegos extremadamente divertidos que ofrecen cientas de horas de entretenimiento. Los jugadores pueden jugar en línea o localmente.",demand:"Desarrollamos video juegos extremadamente divertidos que ofrecen cientas de horas de entretenimiento. Los jugadores pueden jugar en línea o localmente.", chain: 0},
   { name: "PapaNoel2512" ,offer:"Brindamos un servicio de recepción y envíos de paquetes a una escala mundial. El tiempo estimado de envío es de una noche hasta un día completo gracias a nuestros vehículos de gran velocidad.",demand:"Brindamos un servicio de recepción y envíos de paquetes a una escala mundial. El tiempo estimado de envío es de una noche hasta un día completo gracias a nuestros vehículos de gran velocidad.", chain: 0},
   { name: "SantaClaus37" ,offer:"Brindamos",demand:"Brindamos", chain: 0},
   { name: "the_agustd7" ,offer:"composicion de letras y beats de diferentes generos musicales",demand:"composicion de letras y beats de diferentes generos musicales", chain: 0},
   { name: "Kenneth483883" ,offer:"vendo",demand:"vendo", chain: 0},
   { name: "arbolito4848" ,offer:"se vende arbolitos de pino a buen precio",demand:"se vende arbolitos de pino a buen precio", chain: 0},
   { name: "BobTheBuilder250" ,offer:"Vendemos materiales para la construcción de edificios, casas y proyectos de la más alta calidad. Adicionalmente, tenemos un gran equipo de ingenieros civiles con mucha experiencia en el desarrollo de infraestructura pública.",demand:"Vendemos materiales para la construcción de edificios, casas y proyectos de la más alta calidad. Adicionalmente, tenemos un gran equipo de ingenieros civiles con mucha experiencia en el desarrollo de infraestructura pública.", chain: 0},
   { name: "OlcoManGold" ,offer:"Me desempeño como programador y desarrollador de software. Tengo mucha experiencia tras trabajar once años en la industria. Soy experto en lenguajes como Python y me especializo en el desarrollo del firmware para dispositivos",demand:"Me desempeño como programador y desarrollador de software. Tengo mucha experiencia tras trabajar once años en la industria. Soy experto en lenguajes como Python y me especializo en el desarrollo del firmware para dispositivos", chain: 0},
   { name: "CompuYankeeDev129" ,offer:"Soy un ingeniero en computación con cuatro años de experiencia. He trabajado como programador en Python y Java en empresas desarrolladoras de software como RealSolutions.",demand:"Soy un ingeniero en computación con cuatro años de experiencia. He trabajado como programador en Python y Java en empresas desarrolladoras de software como RealSolutions.", chain: 0},
   { name: "Mesa_School" ,offer:"Somos una institución educativa para niños y adolescentes talentosos que busca explotar su potencial intelectual desarrollando sus habilidades STEM para llegar a ser los futuros ingenieros en computación.",demand:"Somos una institución educativa para niños y adolescentes talentosos que busca explotar su potencial intelectual desarrollando sus habilidades STEM para llegar a ser los futuros ingenieros en computación.", chain: 0},
   { name: "AstraMedical222" ,offer:"Somos una empresa farmacéutica que desarrolla medicamentos para combatir enfermedades respiratorias para niños de escuela con factores de riesgo.",demand:"Somos una empresa farmacéutica que desarrolla medicamentos para combatir enfermedades respiratorias para niños de escuela con factores de riesgo.", chain: 1},
   { name: "construSoluciones2001" ,offer:"Ofrecemos mano de obra y materiales para la construccion de su casa, edificio o proyect",demand:"Ofrecemos mano de obra y materiales para la construccion de su casa, edificio o proyect", chain: 0},
   { name: "RealSolutions" ,offer:"Somos una empresa desarrolladora de software. Contamos con un equipo de programadores con mucha experiencia y conocimientos en muchos lenguajes como Python. Nuestros ingenieros en computación pueden trabajar en todo tipo de dispositivos.",demand:"Somos una empresa desarrolladora de software. Contamos con un equipo de programadores con mucha experiencia y conocimientos en muchos lenguajes como Python. Nuestros ingenieros en computación pueden trabajar en todo tipo de dispositivos.", chain: 0},
   { name: "EstructurasMina" ,offer:"Somos una empresa constructora que construye edificios de oficinas modernos y espaciosos. Nuestros edificios pueden acomodar la última tecnología fácilmente y están diseñados para tener altas velocidades de internet.",demand:"Somos una empresa constructora que construye edificios de oficinas modernos y espaciosos. Nuestros edificios pueden acomodar la última tecnología fácilmente y están diseñados para tener altas velocidades de internet.", chain: 0},
   { name: "Hospital_Tec" ,offer:"Somos una institución que brinda un servicio de alta calidad en el área de la salud. Nos especializamos en tratar lesiones provocadas por accidentes en el área de trabajo.",demand:"Somos una institución que brinda un servicio de alta calidad en el área de la salud. Nos especializamos en tratar lesiones provocadas por accidentes en el área de trabajo.", chain: 0},
   { name: "Wakanda_Med" ,offer:"Vendemos máquinas con fines médicos de alta tecnología y calidad, hechas de metales exóticos, para tratamientos de enfermedades o heridas fatales.",demand:"Vendemos máquinas con fines médicos de alta tecnología y calidad, hechas de metales exóticos, para tratamientos de enfermedades o heridas fatales.", chain: 0},
   { name: "vendePollos38" ,offer:"Se vende pollo asado, frito o al ajillo",demand:"Se vende pollo asado, frito o al ajillo", chain: 0},
   { name: "elvendeTacos29" ,offer:"venta de tacos al estilo mexicano tradicional ",demand:"venta de tacos al estilo mexicano tradicional ", chain: 1},
   { name: "badbunny_in_concert" ,offer:"conciertos a estadio lleno de gente escuchando pum pum con el mismo acorde por 2 horas",demand:"conciertos a estadio lleno de gente escuchando pum pum con el mismo acorde por 2 horas", chain: 0},
   { name: "rock_odin_gold" ,offer:"soy programador python con experiencia",demand:"soy programador python con experiencia", chain: 0},
   { name: "metal_year_2000" ,offer:"",demand:"", chain: 0},
   { name: "josearnoldowood" ,offer:"esta es la oferta",demand:"esta es la oferta", chain: 1}
],
  links: [
 { source: "OriSolis25", target: "poly_bridgers" },
   { source: "poly_bridgers", target: "Green_Lion" },
   { source: "Green_Lion", target: "SuperSmashCoders122" },
   { source: "SuperSmashCoders122", target: "PapaNoel2512" },
   { source: "PapaNoel2512", target: "SantaClaus37" },
   { source: "SantaClaus37", target: "the_agustd7" }
]
     };
var simulation = d3
         .forceSimulation(graphData.nodes)
         .force("collide", d3.forceCollide().radius(40))
         .force("charge", d3.forceManyBody().strength(100))
         .force("center", d3.forceCenter(width / 2, height / 2))
         .force("link", d3.forceLink(graphData.links).id(d => d.name))
         .on("tick", ticked);

 var links = svg
         .append("g")
         .selectAll("line")
         .data(graphData.links)
         .enter()
         .append("line")
         .attr("stroke-width", 3)
         .attr('marker-end', 'url(#mark-end-arrow)')
         .style("stroke", "Black");

 links.append("text").text(d => d.name);
 var defs = svg.append('svg:defs');
 defs.append('svg:marker')
         .attr('id', 'end-arrow')
         .attr('viewBox', '0 -5 10 10')
         .attr('refX', "32")
         .attr('markerWidth', 2)
         .attr('markerHeight', 2)
         .attr('orient', 'auto')
         .append('svg:path')
         .attr('d', 'M0,-L10,0L0,5');

 // define arrow markers for leading arrow
 defs.append('svg:marker')
         .attr('id', 'mark-end-arrow')
         .attr('viewBox', '0 -5 10 10')
         .attr('refX', 20)
         .attr('markerWidth', 3.5)
         .attr('markerHeight', 3.5)
         .attr('orient', 'auto')
         .append('svg:path')
         .attr('d', 'M0,-5L10,0L0,5');

 let color = [
        "grey",
        "#59e521",
];

 var nodes = svg
         .append("g")
         .selectAll("circle")
         .data(graphData.nodes)
         .enter()
         .append("circle")
         .attr("r", 12)
         .style("fill", function(d) {
                return color[d.chain];
         });
         

 var texts = svg
         .append("g")
         .selectAll("text")
         .data(graphData.nodes)
         .enter()
         .append("text")
         .text(d => d.name);

 var drag = d3
         .drag()
         .on("start", dragstarted)
         .on("drag", dragged)
         .on("end", dragended);

 nodes.call(drag);

 function ticked() {
  texts.attr("x",d => d.x);
  texts.attr("y",d => d.y);
  //updating the position
  nodes
          .attr("cx", function(d) {
           return d.x;
          })
          .attr("cy", function(d) {
           return d.y;
          });

  links
          .attr("x1", function(d) {
           return d.source.x;
          })
          .attr("y1", function(d) {
           return d.source.y;
          })
          .attr("x2", function(d) {
           return d.target.x;
          })
          .attr("y2", function(d) {
           return d.target.y;
          });
  console.log(simulation.alpha());
 }

 function dragstarted(d) {
  //your alpha hit 0 it stops! make it run again
  simulation.alphaTarget(0.3).restart();
  d.fx = d3.event.x;
  d.fy = d3.event.y;
 }
 function dragged(d) {
  d.fx = d3.event.x;
  d.fy = d3.event.y;
 }

 function dragended(d) {
  // alpha min is 0, head there
  simulation.alphaTarget(0);
  d.fx = null;
  d.fy = null;
 }
</script>